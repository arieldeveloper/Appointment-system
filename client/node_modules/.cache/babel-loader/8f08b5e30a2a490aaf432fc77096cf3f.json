{"ast":null,"code":"// All functions pertaining to the appointment system\nfunction generateTimetable(startTime, endTime, interval) {\n  // Creates an time table slots given a start time, end time and intervals\n  // startTime > 0 && endTime < 24, intervals < 60 (interval given in minutes)\n  // ex. generateTimetable(3, 5, 60);\n  // { \"3:00\": \"available\", \"4:00\": \"available\", \"5:00\": \"available\"}\n  let timeTableObj = {};\n\n  for (var hour = startTime; hour < endTime + 1; hour++) {\n    for (var minute = 0; minute < 60 / interval * interval; minute += interval) {\n      let newObj = {};\n      newObj.hour = hour;\n      let min = minute < 10 ? \"0\" + minute.toString() : minute; // adds the extra 0 in the string\n\n      let label = newObj.hour.toString() + \":\" + min.toString();\n      timeTableObj[label] = \"available\";\n    }\n  }\n\n  return timeTableObj;\n}\n\nfunction getDaysBookedSlots(day, month, year, data) {\n  // Returns the given days booked slots as objects inside an array\n  var newArray = data.filter(function (appointment) {\n    return appointment.day === day && appointment.month === month && appointment.year === year;\n  });\n  return newArray;\n}\n\nlet testData = [{\n  \"user\": \"admin\",\n  \"_id\": \"6123cba99675f82c73adb053\",\n  \"day\": 23,\n  \"month\": 8,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 23,\n  \"__v\": 0\n}, {\n  \"user\": \"admin\",\n  \"_id\": \"6123ce632ef8d32cd5083baf\",\n  \"day\": 23,\n  \"month\": 3,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 23,\n  \"__v\": 0\n}, {\n  \"user\": \"admin\",\n  \"_id\": \"6123cf0fcaa6162cf9a95e19\",\n  \"day\": 23,\n  \"month\": 3,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 23,\n  \"__v\": 0\n}, {\n  \"user\": \"admin\",\n  \"_id\": \"6123cf4f777bc62d15c4605a\",\n  \"day\": 23,\n  \"month\": 3,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 23,\n  \"__v\": 0\n}, {\n  \"user\": \"arieldeveloper\",\n  \"_id\": \"6123cf53777bc62d15c4605c\",\n  \"day\": 23,\n  \"month\": 3,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 23,\n  \"__v\": 0\n}, {\n  \"user\": \"arieldeveloper\",\n  \"_id\": \"6123ff4c777bc62d15c46062\",\n  \"day\": 1,\n  \"month\": 1,\n  \"year\": 2021,\n  \"hour\": 11,\n  \"minute\": 0,\n  \"__v\": 0\n}, {\n  \"user\": \"arieldeveloper\",\n  \"_id\": \"6123ff50777bc62d15c46064\",\n  \"day\": 1,\n  \"month\": 1,\n  \"year\": 2021,\n  \"hour\": 12,\n  \"minute\": 0,\n  \"__v\": 0\n}, {\n  \"user\": \"arieldeveloper\",\n  \"_id\": \"6123ff53777bc62d15c46066\",\n  \"day\": 1,\n  \"month\": 1,\n  \"year\": 2021,\n  \"hour\": 6,\n  \"minute\": 0,\n  \"__v\": 0\n}];\n\nfunction populateDailyTimetable(startTime, endTime, interval, day, month, year, data) {\n  // Populates a newly generated timetable with the already booked slots\n  let newTimeTable = generateTimetable(startTime, endTime, interval); // generate a new table\n  // returns all the booked time slots for the current day in JSON\n\n  let bookedTimes = getDaysBookedSlots(day, month, year, data); // Loop through all avaiable slots and make them unavailable based on booked time slots\n\n  for (const availableSlot in newTimeTable) {\n    // extract the min, hour from the format \"12:30\"\n    let [hour, min] = availableSlot.split(':');\n\n    for (const index in bookedTimes) {\n      if (bookedTimes[index].hour.toString() === hour) {\n        newTimeTable[availableSlot] = \"unavailable\";\n      }\n    }\n  }\n\n  return newTimeTable;\n}\n\nexport default populateDailyTimetable;","map":{"version":3,"sources":["/Users/arielchouminov/Desktop/web-app/client/src/components/booking.js"],"names":["generateTimetable","startTime","endTime","interval","timeTableObj","hour","minute","newObj","min","toString","label","getDaysBookedSlots","day","month","year","data","newArray","filter","appointment","testData","populateDailyTimetable","newTimeTable","bookedTimes","availableSlot","split","index"],"mappings":"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","sourcesContent":["// All functions pertaining to the appointment system\nfunction generateTimetable(startTime, endTime, interval) {\n    // Creates an time table slots given a start time, end time and intervals\n    // startTime > 0 && endTime < 24, intervals < 60 (interval given in minutes)\n    // ex. generateTimetable(3, 5, 60);\n    // { \"3:00\": \"available\", \"4:00\": \"available\", \"5:00\": \"available\"}\n\n    let timeTableObj = {};\n\n    for (var hour = startTime; hour < (endTime + 1); hour++) {\n        for (var minute = 0; minute < (60 / interval) * interval; minute += interval) {\n            let newObj = {};\n            newObj.hour = hour;\n            let min = ((minute < 10) ? \"0\" + minute.toString(): minute) // adds the extra 0 in the string\n            let label = newObj.hour.toString() + \":\" + min.toString();\n            timeTableObj[label] = \"available\";\n        }\n    }\n    return timeTableObj;\n}\n\nfunction getDaysBookedSlots(day, month, year, data) {\n    // Returns the given days booked slots as objects inside an array\n    var newArray = data.filter(function (appointment) {\n        return (appointment.day === day && appointment.month === month\n            && appointment.year === year);\n    });\n    return newArray\n}\n\nlet testData = [{\"user\":\"admin\",\"_id\":\"6123cba99675f82c73adb053\",\"day\":23,\"month\":8,\"year\":2021,\"hour\":12,\"minute\":23,\"__v\":0},\n    {\"user\":\"admin\",\"_id\":\"6123ce632ef8d32cd5083baf\",\"day\":23,\"month\":3,\"year\":2021,\"hour\":12,\"minute\":23,\"__v\":0},\n    {\"user\":\"admin\",\"_id\":\"6123cf0fcaa6162cf9a95e19\",\"day\":23,\"month\":3,\"year\":2021,\"hour\":12,\"minute\":23,\"__v\":0},\n    {\"user\":\"admin\",\"_id\":\"6123cf4f777bc62d15c4605a\",\"day\":23,\"month\":3,\"year\":2021,\"hour\":12,\"minute\":23,\"__v\":0},\n    {\"user\":\"arieldeveloper\",\"_id\":\"6123cf53777bc62d15c4605c\",\"day\":23,\"month\":3,\"year\":2021,\"hour\":12,\"minute\":23,\"__v\":0},\n    {\"user\":\"arieldeveloper\",\"_id\":\"6123ff4c777bc62d15c46062\",\"day\":1,\"month\":1,\"year\":2021,\"hour\":11,\"minute\":0,\"__v\":0},\n    {\"user\":\"arieldeveloper\",\"_id\":\"6123ff50777bc62d15c46064\",\"day\":1,\"month\":1,\"year\":2021,\"hour\":12,\"minute\":0,\"__v\":0},\n    {\"user\":\"arieldeveloper\",\"_id\":\"6123ff53777bc62d15c46066\",\"day\":1,\"month\":1,\"year\":2021,\"hour\":6,\"minute\":0,\"__v\":0}];\n\n\nfunction populateDailyTimetable(startTime, endTime, interval, day, month, year, data) {\n    // Populates a newly generated timetable with the already booked slots\n    let newTimeTable = generateTimetable(startTime, endTime, interval); // generate a new table\n\n    // returns all the booked time slots for the current day in JSON\n    let bookedTimes = getDaysBookedSlots(day, month, year, data);\n\n    // Loop through all avaiable slots and make them unavailable based on booked time slots\n    for (const availableSlot in newTimeTable) {\n        // extract the min, hour from the format \"12:30\"\n        let [hour, min] = availableSlot.split(':');\n\n        for (const index in bookedTimes) {\n            if (bookedTimes[index].hour.toString() === hour) {\n                newTimeTable[availableSlot] = \"unavailable\";\n            }\n        }\n    }\n    return newTimeTable;\n    }\n\n\nexport default populateDailyTimetable;\n\n"]},"metadata":{},"sourceType":"module"}